<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>รายละเอียดข้อมูลผิวหน้า</title>
    <script>
        // ปิดการคลิกขวา
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            alert('ไม่อนุญาตให้คลิกขวา');
        });

        // ปิดการใช้ Print Screen (พรินท์สกรีน)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'PrintScreen') {
                alert('ไม่อนุญาตให้แคปหน้าจอ');
                e.preventDefault();
            }
        });

        // ลบคลิปบอร์ดเมื่อกด Print Screen
        document.addEventListener('keyup', function(e) {
            if (e.key === 'PrintScreen') {
                navigator.clipboard.writeText('');
                alert('เนื้อหาหน้าจอถูกลบจากคลิปบอร์ดแล้ว');
            }
        });
    </script>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; padding: 20px;">
    <div style="max-width: 800px; margin: auto; background-color: #f9f9f9; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);">
        <h1 style="text-align: center; color: #333;">รายละเอียดข้อมูลผิวหน้า</h1>
        
        <div>
            <p><strong>ชื่อผู้ใช้:</strong> {{ skin_data.user.username }}</p>
            <p><strong>ประเภทผิว:</strong> {{ skin_data.skin_type }}</p>
            <p><strong>ปัญหาผิวหน้า:</strong> {{ skin_data.concern }}</p>
            <p><strong>อาการแพ้:</strong> {{ skin_data.allergy_history }}</p>
            <p><strong>ผลิตภัณฑ์ที่ใช้:</strong> {{ skin_data.current_products }}</p>
            <p><strong>เป้าหมายการดูแลผิว:</strong> {{ skin_data.skincare_goal }}</p>
            <p><strong>วันที่ส่ง:</strong> {{ skin_data.submitted_at|date:"d M Y H:i" }}</p>

            {% if skin_data.skin_image %}
            <div class="mt-4">
                <p><strong>ภาพผิวหน้าที่อัปโหลด:</strong></p>
                <img src="{{ skin_data.skin_image.url }}" alt="ภาพผิวหน้า" class="w-full max-w-sm border rounded shadow">
            </div>
            {% endif %}
        </div>
    

        <hr>

        <!-- แสดงคำตอบจากผู้เชี่ยวชาญ -->
        {% if expert_response %}
            <h2 style="color: #007BFF;">คำตอบของคุณ</h2>
            <p style="background: #e6f7ff; padding: 10px; border-radius: 5px;">{{ expert_response.response_text }}</p>
            <p><strong>วันที่ตอบ:</strong> {{ expert_response.created_at|date:"d M Y H:i" }}</p>

            <!-- เพิ่มปุ่มแก้ไขคำตอบ -->
            <h3 style="margin-top: 20px; color: #007BFF;">แก้ไขคำตอบของคุณ</h3>
            <form method="POST" style="margin-top: 10px;">
                {% csrf_token %}
                <textarea name="response_text" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">{{ expert_response.response_text }}</textarea>
                <button type="submit" style="margin-top: 10px; background-color: #007BFF; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">บันทึก</button>
            </form>
        {% else %}
            <h2 style="color: #007BFF;">ตอบกลับปัญหาผิวหน้า</h2>
            <form method="POST" style="margin-top: 20px;">
                {% csrf_token %}
                <textarea name="response_text" rows="4" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" placeholder="เขียนคำตอบของคุณ..."></textarea>
                <button type="submit" style="margin-top: 10px; background-color: #007BFF; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">ส่งคำตอบ</button>
            </form>
        {% endif %}
    </div>
</body>
</html>
